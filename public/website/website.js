function appendDiv(){localStorage.getItem("HelpPhoneHide")||$(".subscribe-popup").modal("show")}function SendHelpMessage(e){var t=document.querySelector('meta[name="csrf-token"]').content;$.ajax({type:"POST",headers:{"X-CSRF-Token":t},url:"/help-phone",data:{phone:e,message:"Need Help !"},error:function(e,t,a){toastr.error("Something went wrong , try again please !")},success:function(e){$(".input_num_modal").addClass("border-success"),$(".subscribe-popup").modal("hide"),toastr.success("Merci, nous vous contacterons bientÃ´t!")}})}$(document).ready(function(){$.ajaxSetup({cache:!1})}),window.setTimeout(appendDiv,6e4),$("#no_show").on("click",function(){localStorage.setItem("HelpPhoneHide",!0)}),$(".btn-send").on("click",function(){($(".phone-input").val().match(PhoneRegEx)||$(".phone-input").val().match(PhoneRegEx2)||$(".phone-input").val().match(PhoneRegEx3)||$(".phone-input").val().match(PhoneRegEx4))&&(SendHelpMessage($(".phone-input").val()),$("html, body").animate({scrollTop:0},2200))});const PhoneRegEx=/^0\d{9}$/g,PhoneRegEx2=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im,PhoneRegEx3=/^\d{9}$/g,PhoneRegEx4=/^[0-9]{1,2}?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;$(".phone-input").on("input",function(){var e=$(this).val();$(this).removeClass("border-danger"),$(this).val().length>=9&&$(this).val().length<=14&&($(this).val().match(PhoneRegEx)||$(this).val().match(PhoneRegEx2)||$(this).val().match(PhoneRegEx3)||$(this).val().match(PhoneRegEx4))&&(e.startsWith("00213")&&14===e.length||e.startsWith("0213")&&13===e.length||e.startsWith("213")&&12===e.length||e.startsWith("+213")&&13===e.length||(e.startsWith("5")||e.startsWith("6")||e.startsWith("7"))&&9===e.length||e.startsWith("0")&&10===e.length)?($(".btn-phone-send").attr("disabled",!1),$(this).addClass("border-success"),$(this).removeClass("border-danger"),$(".invalid-phone").hide()):($(".btn-phone-send").attr("disabled",!0),$(this).removeClass("border-success"),$(this).addClass("border-danger"),$(".invalid-phone").show())}),$(".input_num_modal").on("input",function(){$(this).removeClass("border-danger"),10==$(this).val().length&&($(this).val().match(PhoneRegEx)?(SendHelpMessage($(this).val()),localStorage.setItem("HelpPhoneHide",!0)):$(this).addClass("border-danger"))}),$(".logout").on("click",function(){$("#logout-form").submit()}),$(".add-to-cart").click(function(){var e=document.querySelector('meta[name="csrf-token"]').content,t="/:product/add-to-cart";t=t.replace(":product",$(this).data("id")),$.ajax({type:"POST",headers:{"X-CSRF-Token":e},url:t,error:function(e){toastr.error(e.message)},success:function(e){toastr.success(e.message),$(".cart-notification").text(e.data.count),$.when($.get("/",function(e){$html_modal=$(e).find(".modal-cart").html(),$html_cart=$(e).find(".cart-header").html()})).done(function(){$(".modal-cart").empty(),$(".modal-cart").append($html_modal),$(".cart-header").empty(),$(".cart-header").append($html_cart)})}})}),$(".add-cart-qte").click(function(){var e=document.querySelector('meta[name="csrf-token"]').content,t="/:product/add-to-cart";t=t.replace(":product",$(this).data("id"));var a=$(this).parent().parent().parent().parent().parent().find("#qty").val();$.ajax({type:"POST",headers:{"X-CSRF-Token":e},data:{qty:a},url:t,error:function(e){toastr.error(e.message)},success:function(e){toastr.success(e.message),$(".cart-notification").text(e.data.count),$.when($.get("/",function(e){$html_modal=$(e).find(".modal-cart").html(),$html_cart=$(e).find(".cart-header").html()})).done(function(){$(".modal-cart").empty(),$(".modal-cart").append($html_modal),$(".cart-header").empty(),$(".cart-header").append($html_cart)})}})}),$("body").on("click",".cart-remove-item",function(){var e=document.querySelector('meta[name="csrf-token"]').content,t="/:product/delete-item-cart";t=t.replace(":product",$(this).data("id")),$.ajax({type:"POST",headers:{"X-CSRF-Token":e},url:t,error:function(e){toastr.error(e.message)},success:function(e){toastr.success(e.message),location.reload()}})}),$("body").on("input",".qty-edit-cart",function(){var e=$(this).val();Math.floor(e)!==Number(e)||null===e?($(this).addClass("border border-danger"),$(this).removeClass("border border-success")):($(this).removeClass("border border-danger"),$(this).addClass("border border-success"))}),$("body").on("input",".qty-edit-cart",function(){var e=document.querySelector('meta[name="csrf-token"]').content,t="/:product/update-item-cart";t=t.replace(":product",$(this).data("id"));var a=$(this).val();console.log(a),Math.floor(a)!==Number(a)||null===a||""===a?($(this).addClass("border border-danger"),$(this).removeClass("border border-success")):($(this).removeClass("border border-danger"),$(this).addClass("border border-success"),$.ajax({type:"POST",headers:{"X-CSRF-Token":e},data:{qty:$(this).val()},url:t,error:function(e){toastr.error(e.message)},success:function(e){toastr.success(e.message),location.reload()}}))}),$(".change-lang").on("change",function(){var e=document.querySelector('meta[name="csrf-token"]').content,t=$(this).find("option:selected").val();$(this).removeClass("border border-danger"),$(this).addClass("border border-success"),$.ajax({type:"POST",headers:{"X-CSRF-Token":e},data:{lang:t},url:"/SetLang",error:function(e){toastr.error(e.message)},success:function(e){location.reload()}})}),$(".filter-price").on("click",function(){var e=$("#amount").val(),t=parseInt(e.split("-")[0].replace("DA","")),a=parseInt(e.split("-")[1].replace("DA",""));let r=new URL(window.location.href);r.searchParams.set("prix_u",a),r.searchParams.set("prix_l",t);var o=r.href;$(location).prop("href",o)}),$(".category-link").on("click",function(){let e=new URL(window.location.href);e.searchParams.set("c",$(this).data("id"));var t=e.href;$(location).prop("href",t)}),$(".brand-link").on("click",function(){let e=new URL(window.location.href);e.searchParams.set("marque",$(this).data("id"));var t=e.href;$(location).prop("href",t)}),$("#show-item").on("change",function(){let e=new URL(window.location.href);e.searchParams.set("par_page",$(this).val());var t=e.href;$(location).prop("href",t)}),$("#sort-price").on("change",function(){let e=new URL(window.location.href);e.searchParams.set("trier",$(this).val());var t=e.href;$(location).prop("href",t)}),$("body").on("click",".btn-address",function(){var e=$(this).prev();e.find(".select-address").remove(),$(".prototype").find(".input-address").clone().appendTo(e.find(".input-box")),$(this).addClass("btn-address-reverse"),$(this).removeClass("btn-address"),$(this).text("Retour")}),$("body").on("click",".btn-address-reverse",function(){var e=$(this).prev();e.find(".input-address").remove(),$(".prototype").find(".select-address").clone().appendTo(e.find(".input-box")),$(this).removeClass("btn-address-reverse"),$(this).addClass("btn-address"),$(this).text("Nouveau")}),$(".vendor-link").on("click",function(){let e=new URL(window.location.href);e.searchParams.set("vendor",$(this).data("id"));var t=e.href;$(location).prop("href",t)});
